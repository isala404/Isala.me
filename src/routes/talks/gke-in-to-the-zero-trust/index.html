<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Securing GKE Workloads: Zero Trust with eBPF</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/black.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .container {
            display: flex;
            justify-content: space-between;
        }

        .split-screen {
            display: flex;
            justify-content: space-around;
        }

        .left,
        .right {
            flex: 1;
            padding: 20px;
        }

        .highlight {
            color: #00aaff;
        }

        .warning {
            color: #ff5555;
        }

        .success {
            color: #55ff55;
        }

        code {
            background: #333;
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!-- Title Slide -->
            <section data-background="#000033">
                <h1>Securing GKE Workloads</h1>
                <h2>Journey to Zero Trust with eBPF</h2>
                <div style="margin-top: 400px; text-align: center;">
                    <p>Isala Piyarisi</p>
                    <p>Senior Software Engineer, WSO2</p>
                    <p>GCP ACE, CKA, CKS</p>
                </div>
                <aside class="notes">
                    Hey everyone! Super excited to be here talking about securing GKE workloads using eBPF to achieve zero trust architecture.

                    Quick show of hands - who here has heard of Kubernetes?

                    I'm Isala Piyarisi, and I work as a Senior Software Engineer at WSO2. I hold both the Certified Kubernetes Administrator and Security Specialist certifications. Fun fact - I was actually supposed to speak at KubeCon NA next week, but the US embassy had other plans! *nervous laugh*

                    Today, we're going to dive into some really cool concepts about modern cloud security, and I'll show you some live demos of how this all works in the real world. Trust me, it's going to be fun!
                </aside>
            </section>

            <!-- Zero Trust Introduction -->
            <section>
                <h2>Zero Trust: The New Normal</h2>
                <div class="split-screen">
                    <div class="left">
                        <h3>Traditional Security</h3>
                        <ul>
                            <li>Perimeter-based security</li>
                            <li>Trust by default</li>
                            <li>Network location = Identity</li>
                        </ul>
                    </div>
                    <div class="right">
                        <h3>Zero Trust</h3>
                        <ul>
                            <li>Never trust, always verify</li>
                            <li>Identity-based security</li>
                            <li>Continuous verification</li>
                        </ul>
                    </div>
                </div>
                <div class="flex justify-center">
                    <a href="https://www.statista.com/chart/28878/expected-cost-of-cybercrime-until-2027/"
                        title="Infographic: Cybercrime Expected To Skyrocket in Coming Years | Statista">
                        <img style="height: 600px; width: auto;" src="https://cdn.statcdn.com/Infographic/images/normal/28878.jpeg"
                            alt="Infographic: Cybercrime Expected To Skyrocket in Coming Years | Statista" />
                    </a>
                    <a href="https://www.stationx.net/cyber-security-job-statistics/">
                        <img style="height: 600px; width: auto;"
                        src="https://www.stationx.net/wp-content/uploads/2023/12/3.-Cyber-Security-Staffing-as-a-part-of-Employers-Wider-Cyber-Security-Spending.png"
                        alt="Cyber Security Staffing as a part of Employers Wider Cyber Security Spending" />
                    </a>
                </div>
                <aside class="notes">
                    Alright, let's talk about Zero Trust! You know how in medieval times, they built these massive castle walls and if you got past them, you were basically trusted? That's kind of how traditional security worked.

                    But in today's world, that's like leaving your front door open just because someone made it into your neighborhood! Zero Trust is different - it's like having a bouncer who checks everyone's ID, every single time, no matter if they're the CEO or the intern.

                    Looking at these charts - yeah, those numbers are pretty scary, right? Cybercrime is skyrocketing, and companies are scrambling to hire security experts. But don't worry, that's exactly why we're here today - to learn how to protect ourselves better!
                </aside>
            </section>

            <!-- Threat Landscape -->
            <section>
                <h2>Modern Threat Landscape in K8s Clusters</h2>
                <div class="content">
                    <ul>
                        <li class="fragment">API Server Exposure</li>
                        <li class="fragment">Container Runtime Vulnerabilities</li>
                        <li class="fragment">Network Security Gaps</li>
                        <li class="fragment">Identity Management Challenges</li>
                        <li class="fragment">Unsecured Kubernetes Dashboard</li>
                        <li class="fragment">RBAC Misconfigurations (Excessive Permissions)</li>
                        <li class="fragment">Insecure Pod Security Policies (PSPs)</li>
                        <li class="fragment">Container Image Vulnerabilities (e.g., outdated or unpatched images)</li>
                        <li class="fragment">Inadequate Namespace Isolation</li>
                        <li class="fragment">Secrets Leakage through Environment Variables</li>
                        <li class="fragment">Node-Level Access Exposures (e.g., unrestricted SSH access)</li>
                        <li class="fragment">...and more</li>
                    </ul>
                </div>
                <aside class="notes">
                    Now, let's talk about what keeps Kubernetes administrators up at night! 

                    Imagine your Kubernetes cluster is like a big office building. The API server is like the main reception desk - if someone gets control of that, they basically have the master key to everything. 

                    Container vulnerabilities? Those are like having weak locks on your office doors. Network security gaps? That's like having secret passages between offices that nobody knows about!

                    And don't even get me started on RBAC misconfigurations - it's like accidentally giving the cleaning crew access to the CEO's private files. *chuckles* 

                    These might sound funny, but they're real issues we need to deal with. Let's see how we can fix them!
                </aside>
            </section>

            <!-- Attack Vector 1 -->
            <section>
                <h2>Case Study: Tesla</h2>
                <h3>A Exposed Kubernetes Dashboard</h3>
                <div class="content">
                    <div class="flex justify-center">
                        <img src="https://static.isala.me/portfolio/talks/gdg/tesla-k8s-dashboard.png" alt="Tesla's Exposed Kubernetes Dashboard">
                    </div>
                </div>
                <aside class="notes">
                    Here's a wild story - Tesla, yes, THE Tesla, had their Kubernetes dashboard exposed to the internet. It's like leaving your car keys in the ignition with a sign saying "Please don't steal"!

                    What happened next? Crypto miners. They basically turned Tesla's compute power into their personal Bitcoin mining rig. Talk about an expensive mining operation!

                    The scary part? This could have been WAY worse if there was sensitive user data in that cluster. Imagine if instead of mining crypto, they were mining customer data! *shivers*
                </aside>
            </section>

            <!-- Attack Vector 2 -->
            <section>
                <h2>Case Study: Hugging Face</h2>
                <h3>Poor Network Segmentation</h3>
                <div class="content">
                    <div class="flex justify-center">
                        <img src="https://www.datocms-assets.com/75231/1712240351-diagram-3.png" alt="Hugging Face's Poor Network Segmentation">
                    </div>
                </div>
                <aside class="notes">
                    Now this one's really interesting - Hugging Face, you know, the AI company everyone's talking about? They ran into a classic "oops" moment with their network setup.

                    Imagine you're in a shared office space, but there are no walls between companies - just desks everywhere. That's basically what happened here! Their AI models could potentially peek at each other's data, which in the AI world is a big no-no.

                    The really scary part? If someone uploaded a malicious AI model, it could break out of its sandbox and start accessing other customers' data. It's like bringing a mischievous puppy to work that somehow knows how to use a computer! 

                    Thankfully, they worked with Wiz Research to fix these issues before anything bad happened. But it shows how even the smartest tech companies can miss these security basics!
                </aside>
            </section>


            <section>
                <h2>Case Study: CVE-2022-0811</h2>
                <h3>Insufficient Pod Security</h3>
                <div class="content">
                    <div class="flex flex-col justify-center gap-4">
                        <img src="https://storage.googleapis.com/static.isala.me/portfolio/talks/gdg/CVE-2022-0811-1.png" alt="CVE-2022-0811 Description">
                        <img src="https://storage.googleapis.com/static.isala.me/portfolio/talks/gdg/CVE-2022-0811-2.png" alt="CVE-2022-0811 Resolution">
                    </div>
                </div>
                <aside class="notes">
                    Let's talk about CVE-2022-0811, or as I like to call it, "The Container Escape Artist"!

                    You know how Container-as-a-Service platforms let you deploy containers easily? Well, this vulnerability was like giving every container a secret trap door to escape into the host system.

                    Think of it like this: you rent an apartment in a building, but due to a weird design flaw, you can somehow access the building's maintenance areas and other people's apartments! Not great, right?

                    This vulnerability was particularly sneaky because it affected the container runtime itself. It's like having a security guard who accidentally gives everyone master keys instead of room keys!
                </aside>
            </section>

            <!-- eBPF Introduction -->
            <section>
                <h2>Enter eBPF: The Game Changer</h2>
                <div class="content">
                    <ul>
                        <li class="fragment">Extended Berkeley Packet Filter</li>
                        <li class="fragment">Kernel-level Programming</li>
                        <li class="fragment">Safe and Efficient Observability</li>
                    </ul>
                    <div class="fragment flex justify-center">
                        <img style="height: 700px; width: auto;" src="https://raw.githubusercontent.com/iovisor/bcc/refs/heads/master/images/bcc_tracing_tools_2019.png" alt="eBPF Architecture">
                    </div>
                </div>
                <aside class="notes">
                    Now for the fun part - eBPF! Think of it as giving your Linux kernel superpowers. 

                    You know those CSI shows where they can magically enhance security camera footage? eBPF is kind of like that, but for your system's internals - and it actually works! *winks*

                    It lets us see EVERYTHING happening in the kernel - every network packet, every system call, every file access. But it's not just about watching - we can actually do something about what we see.

                    Look at this diagram - pretty overwhelming, right? Don't worry, we'll break it down. These are all the different things we can monitor with eBPF. It's like having x-ray vision, night vision, and Spidey sense all at once!
                </aside>
            </section>

            <!-- Cilium Overview -->
            <section>
                <h2>Cilium: eBPF-Powered Security</h2>
                <div class="content">
                    <ul>
                        <li class="fragment success">Layer 3-7 Network Security</li>
                        <li class="fragment success">Identity-based Policies</li>
                        <li class="fragment success">Transparent Encryption</li>
                    </ul>
                    <div class="flex justify-center">
                        <img src="https://cilium.io/static/6c69375bdc369895441cdc52ae9801dc/e9407/cilium_arch.png" alt="Cilium Architecture">
                    </div>
                </div>
                <aside class="notes">
                    Meet Cilium - the superhero of our story! If eBPF is our superpowers, Cilium is the cool superhero suit that makes them easy to use.

                    It handles everything from Layer 3 to Layer 7 - that's network speak for "from the basics to the fancy stuff." It's like having a security guard who can not only check IDs but also understand what language you're speaking and what you're trying to do.

                    See these green checkmarks? Each one represents a security feature that would have taken tons of complex configuration before. But with Cilium? It's like having an "easy button" for zero trust security.

                    And the best part? It does all this without slowing things down. It's like adding a security checkpoint that doesn't create a line!
                </aside>
            </section>

            <section>
                <h2>Live Demo</h2>
                <h3>Setup</h3>
                <div style="margin-bottom: 100px; margin-top: 100px;" class="flex flex-col justify-start">
                    <p class="text-left">Demo Steps:</p>
                    <ol>
                        <li class="fragment">Create a GKE node pool with full access scope</li>
                        <li class="fragment">Deploy a pod with Google Cloud CLI</li>
                        <li class="fragment">Deploy a Sample Workload</li>
                        <li class="fragment">Get the admin credentials for the GKE cluster via GCP Metadata Server</li>
                        <li class="fragment">Use the admin credentials to access the Kubernetes API Server</li>
                        <li class="fragment">SSH into node and see though traffic</li>
                    </ol>
                </div>
                <aside class="notes">
                    Alright, time for some live action! *cracks knuckles* Let's see how an attacker might try to compromise a GKE cluster.

                    First, we'll create a node pool with full access - which is something you should never do in production, but hey, we're the bad guys for now! 

                    Then we'll deploy a pod with the Google Cloud CLI - our Swiss Army knife for this demo. We'll use it to try to get admin credentials from the metadata server.

                    Quick heads up - everything I'm about to show you is in a controlled environment. Please don't try this on your production clusters! That would be... bad. Very bad. *nervous laughter*

                    Let me paste the commands we'll need:
                    <code>
                        kubectl run gcloud-cli-pod --image=gcr.io/google.com/cloudsdktool/google-cloud-cli:latest --command -- sleep infinity
                        kubectl label pod gcloud-cli-pod type=user-app
                        kubectl exec -it gcloud-cli-pod -- bash
                        gcloud container clusters get-credentials gdg-demo --zone us-central1-c --project tallisa
                        kubectl debug node/mynode -it --image=ubuntu
                        kubectl apply -f ccnp.yaml -f cnp.yaml
                    </code>
                </aside>
            </section>

            <!-- Live Demo 1 -->
            <section data-background="#1a1a1a">
                <h2>Mitigation: Cilium Network Policies</h2>
                <ol style="margin-bottom: 100px; margin-top: 100px;">
                    <li>Decline Kube API Server by Default</li>
                    <li>Decline GCP Metadata Server by Default</li>
                    <li>Enable mTLS for all traffic</li>
                </ol>
                <aside class="notes">
                    Now that we've seen how scary things can get, let's put on our superhero capes and fix this! 

                    First up - Cilium Network Policies. Think of these as really smart bouncers for your cluster. Unlike regular Kubernetes network policies (which are like basic security guards who can only check if you're on the guest list), Cilium policies can actually understand what you're trying to do!

                    Let's look at three key things we're going to lock down:
                    1. The Kubernetes API Server - no more unauthorized access to the control room!
                    2. The GCP Metadata Server - because that's like leaving your passwords on a Post-it note
                    3. And we'll encrypt ALL traffic with mTLS - it's like giving everyone their own secret decoder ring!

                    Let me show you how this works in practice...
                </aside>
            </section>

            <!-- Tetragon -->
            <section>
                <h2>Tetragon: Runtime Security</h2>
                <div class="content">
                    <ul>
                        <li class="fragment">Real-time Security Monitoring</li>
                        <li class="fragment">Process-level Visibility</li>
                        <li class="fragment">Security Policy Enforcement</li>
                    </ul>
                    <div class="flex justify-center">
                        <img style="height: 700px; width: auto;" src="https://tetragon.io/svgs/diagram-illustration.svg" alt="Tetragon Architecture">
                    </div>
                </div>
                <aside class="notes">
                    Now, let me introduce you to Tetragon - think of it as the world's most advanced security camera system for your cluster!

                    You know how in spy movies they have those cool monitoring rooms with screens showing everything happening everywhere? That's basically what Tetragon gives us, except it's real and it actually works! *grins*

                    It can see every process, every file access, every network connection - it's like having thousands of tiny security guards watching everything in real-time. And the best part? Unlike human security guards, it never gets tired or distracted by cat videos!

                    Look at this diagram - pretty cool, right? Each of these lines represents something we can monitor and control. It's like having x-ray vision for your cluster!
                </aside>
            </section>

            <!-- Live Demo 2 -->
            <section data-background="#1a1a1a">
                <h2>LIVE DEMO: Simulate Zero-day Attacks</h2>
                <div class="demo-notes">
                    <p>Demo Steps:</p>
                    <ol>
                        <li>Deploy a Privileged Container (To Simulate)</li>
                        <li>Access via chroot (Simulate jailbreaking)</li>
                        <li>Access container runtime</li>
                        <li>Steal Credentials from a Privileged Container</li>
                    </ol>
                </div>
                <aside class="notes">
                    Alright, time for some more live action! *rolls up sleeves* 

                    We're going to play both the bad guy AND the superhero in this demo. First, we'll try to break things (in a controlled way, of course), and then we'll see how Tetragon catches us red-handed!

                    Watch what happens when I run this command:
                    kubectl exec -ti -n kube-system ds/tetragon -c tetragon -- tetra getevents -o compact --pods privileged-pod

                    See all that output? That's Tetragon telling us exactly what's happening. It's like having a play-by-play commentator for security events! 

                    And yes, I know the output looks a bit scary - that's kind of the point! *winks*
                </aside>
            </section>

            <!-- Zero Trust Implementation -->
            <section>
                <h2>Mitigation: Zero Trust in Action</h2>
                <div class="content">
                    <ul>
                        <li>All network traffic is encrypted</li>
                        <li>only allow inidiuvally verifeied connection are allowed</li>
                        <li>Audit All System Calls</li>
                        <li>Allow Only Necessary System Calls</li>
                    </ul>
                </div>
                <aside class="notes">
                    Okay, let's put all the pieces together! Remember how we started with that medieval castle analogy? Well, now we're building something more like a high-tech fortress!

                    With our new setup:
                    - Every single network packet gets its own tiny encryption shield
                    - Every connection needs to show multiple forms of ID (and no, "but I work here" doesn't count!)
                    - We're watching every system call like a helicopter parent watching their kid's first date
                    - And we're only allowing the absolute minimum necessary permissions - it's like putting everyone on a strict "need-to-know" diet!

                    The best part? Once you set this up, it just works. It's like having an automated security team that never sleeps, never gets distracted, and never accepts bribes of donuts!
                </aside>
            </section>

            <!-- Cell-Based Architecture -->
            <section>
                <h2>Zero Trust in Production: Cell-Based Architecture</h2>
                <div class="content">
                    <ul>
                        <li class="fragment">Microservices Organization Pattern</li>
                        <li class="fragment">Isolated Security Domains</li>
                        <li class="fragment">Granular Access Control</li>
                    </ul>
                    <div class="flex justify-center">
                        <img style="height: 700px; width: auto;" src="https://wso2.cachefly.net/wso2/sites/all/2023/images/choreo%20project%20trust%20boundaries.png" alt="Cell Architecture">
                    </div>
                </div>
                <aside class="notes">
                    Now, let me share something cool we're doing at WSO2 - we call it the Cell-Based Architecture. Think of it like building a city, but instead of neighborhoods, we have secure cells!

                    Each cell is like its own mini fortress, with clear boundaries and strict rules about who can talk to whom. It's like having a bunch of small, super-secure compounds instead of one big wall around everything.

                    See this diagram? Each of these boxes represents a cell in Choreo, our platform. They're like little security bubbles - nothing gets in or out without proper clearance. 

                    And the really neat part? If something does go wrong (hey, it happens!), the problem stays contained in that one cell. It's like having fireproof walls between apartments - if one catches fire, the others stay safe!
                </aside>
            </section>

            <!-- Best Practices -->
            <section>
                <h2>Best Practices & Takeaways</h2>
                <div class="content">
                    <ul>
                        <li class="fragment">Start with Least Privilege</li>
                        <li class="fragment">Implement Network Segmentation</li>
                        <li class="fragment">Enable Runtime Security</li>
                        <li class="fragment">Monitor and Audit Everything</li>
                    </ul>
                </div>
                <aside class="notes">
                    We're almost at the finish line, folks! Let's recap the key things to remember:

                    Start with least privilege - it's like the "stranger danger" rule for your cluster. Don't trust anyone until they prove themselves!

                    Network segmentation is your friend - it's like having separate rooms for a party instead of one big open space where chaos can spread.

                    Runtime security isn't optional anymore - it's like having security cameras that actually work, instead of those fake ones some stores use! *laughs*

                    And finally, monitor EVERYTHING. Yes, it sounds paranoid, but in security, paranoid is just another word for prepared!
                </aside>
            </section>

            <!-- Resources -->
            <section>
                <h2>Resources & Next Steps</h2>
                <div class="content">
                    <ul>
                        <li><a href="https://cilium.io">Cilium Documentation</a></li>
                        <li><a href="https://github.com/cilium/tetragon">Tetragon GitHub</a></li>
                        <li><a href="https://kubernetes.io/docs/concepts/security/">Kubernetes Security</a></li>
                    </ul>
                    <p class="contact">Contact: your@email.com</p>
                </div>
                <aside class="notes">
                    And that's a wrap, folks! Thank you all for being such an amazing audience! 

                    I've put together some links where you can learn more about everything we've covered today. Think of these as your security homework - but don't worry, it's the fun kind!

                    The journey to zero trust might seem daunting, but remember - even Iron Man had to start somewhere with his suit! Start small, keep learning, and before you know it, you'll be a security superhero too!

                    Feel free to reach out if you have questions - I promise I don't bite! Unless you're a malicious pod trying to escape its container, then all bets are off! *laughs*
                </aside>
            </section>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/plugin/notes/notes.js"></script>

    <script>
        Reveal.initialize({
            controls: true,
            progress: true,
            // center: true,
            hash: true,
            transition: 'slide',
            showNotes: false,
            width: 1440,
            height: 1050,
            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [RevealNotes]
        });
    </script>
</body>

</html>
